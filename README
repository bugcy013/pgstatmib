PostgreSQL Statistics MIB for SNMP
==================================

pgStatMIB ::= { iso(1) org(3) dod(6) internet(1) private(4) enterprises(1) pgsql(27645) 3 }

enterprises.pgsql.pgStatMIB => 1.3.6.1.4.1.27645.3


Tables and Scalars Mapped so Far
--------------------------------

enterprises.pgsql (1.3.6.1.4.1.27645)
|
+--pgStatMIB(3)
   |
   +--pgstatDatabase(1)
   |  |
   |  +--pgstatDatabaseEntry(1)
   |     |  Index: pgstatDatabaseId
   |     |
   |     +-- -R-- Integer32 pgstatDatabaseId(1)
   |     |        Range: 1..2147483647
   |     +-- -R-- String    pgstatDatabaseName(2)
   |     |        Textual Convention: DisplayString
   |     |        Size: 0..64
   |     +-- -R-- Gauge     pgstatDatabaseBackends(3)
   |     +-- -R-- Counter   pgstatDatabaseCommits(4)
   |     +-- -R-- Counter   pgstatDatabaseRollbacks(5)
   |     +-- -R-- Counter   pgstatDatabaseBlocksRead(6)
   |     +-- -R-- Counter   pgstatDatabaseBlocksHit(7)
   |     +-- -R-- Counter   pgstatDatabaseTuplesReturned(8)
   |     +-- -R-- Counter   pgstatDatabaseTuplesFetched(9)
   |     +-- -R-- Counter   pgstatDatabaseTuplesInserted(10)
   |     +-- -R-- Counter   pgstatDatabaseTuplesUpdated(11)
   |     +-- -R-- Counter   pgstatDatabaseTuplesDeleted(12)
   |     +-- -R-- Unsigned  pgstatDatabaseRollbackRatio(21)
   |     |        Range: 0..10000
   |     +-- -R-- Unsigned  pgstatDatabaseCacheHitRatio(22)
   |     |        Range: 0..10000
   |     +-- -R-- Counter   pgstatDatabaseTuplesModified(23)
   |
   +--pgstatBgWriter(10)
      |
      +-- -R-- INTEGER   pgstatBgWriterCheckpointsTimed(1)
      +-- -R-- INTEGER   pgstatBgWriterCheckpointsRequested(2)
      +-- -R-- INTEGER   pgstatBgWriterBuffersCheckpoint(3)
      +-- -R-- INTEGER   pgstatBgWriterBuffersClean(4)
      +-- -R-- INTEGER   pgstatBgWriterMaxWrittenClean(5)
      +-- -R-- INTEGER   pgstatBgWriterBuffersBackend(6)
      +-- -R-- INTEGER   pgstatBgWriterBuffersAllocated(7)


Usage Samples
-------------

$ snmpwalk localhost pgstatDatabase
PGSTAT-MIB::pgstatDatabaseId.11874 = INTEGER: 11874
PGSTAT-MIB::pgstatDatabaseId.16448 = INTEGER: 16448
PGSTAT-MIB::pgstatDatabaseName.11874 = STRING: postgres
PGSTAT-MIB::pgstatDatabaseName.16448 = STRING: rodrigo
PGSTAT-MIB::pgstatDatabaseBackends.11874 = Gauge32: 200
PGSTAT-MIB::pgstatDatabaseBackends.16448 = Gauge32: 10
PGSTAT-MIB::pgstatDatabaseCommits.11874 = Counter32: 50000
PGSTAT-MIB::pgstatDatabaseCommits.16448 = Counter32: 25000
PGSTAT-MIB::pgstatDatabaseRollbacks.11874 = Counter32: 100
PGSTAT-MIB::pgstatDatabaseRollbacks.16448 = Counter32: 50

$ snmpget localhost pgstatDatabaseBackends.16448 -On
.1.3.6.1.4.1.27645.3.1.1.3.16448 = Gauge32: 10

$ snmpget localhost pgstatDatabaseRollbacks.11874 -Of
.iso.org.dod.internet.private.enterprises.pgsql.pgStatMIB.pgstatDatabaseTable.pgstatDatabaseEntry.pgstatDatabaseRollbacks.11874 = Counter32: 100

$ snmptable localhost -Cl -CB -Ci -OX -Cb -Cc 16 -Cw 80 pgstatDatabaseTable
SNMP table: PGSTAT-MIB::pgstatDatabaseTable

Id              Name            Backends        Commits         Rollbacks       
BlocksRead      BlocksHit       TuplesReturned  TuplesFetched   TuplesInserted  
TuplesUpdated   TuplesDeleted   RollbackRatio   CacheHitRatio   TuplesModified  

index: [11874]
11874           postgres        200             50000           100             
?               ?               ?               ?               ?               
?               ?               15              9775            20000           

index: [16448]
16448           rodrigo         10              25000           50              
?               ?               ?               ?               ?               
?               ?               5               8920            3000            

$ snmpwalk localhost pgstatBgWriter
PGSTAT-MIB::pgstatBgWriterCheckpointsTimed.0 = INTEGER: 46
PGSTAT-MIB::pgstatBgWriterCheckpointsRequested.0 = INTEGER: 11
PGSTAT-MIB::pgstatBgWriterBuffersCheckpoint.0 = INTEGER: 1483
PGSTAT-MIB::pgstatBgWriterBuffersClean.0 = INTEGER: 15
PGSTAT-MIB::pgstatBgWriterMaxWrittenClean.0 = INTEGER: 11
PGSTAT-MIB::pgstatBgWriterBuffersBackend.0 = INTEGER: 3077
PGSTAT-MIB::pgstatBgWriterBuffersAllocated.0 = INTEGER: 1583

$ snmpget localhost pgstatBgWriterCheckpointsRequested.0
PGSTAT-MIB::pgstatBgWriterCheckpointsRequested.0 = INTEGER: 12

$ snmpgetnext localhost pgstatBgWriterBuffersCheckpoint
PGSTAT-MIB::pgstatBgWriterBuffersCheckpoint.0 = INTEGER: 567


Expected Sub-Entries
--------------------

pgstatDatabases

pgstatAllTables
pgstatSysTables
pgstatUsrTables

pgstatIOAllTables
pgstatIOSysTables
pgstatIOUsrTables

pgstatAllIndexes
pgstatSysIndexes
pgstatUsrIndexes

pgstatIOAllIndexes
pgstatIOSysIndexes
pgstatIOUsrIndexes

pgstatIOAllSequences
pgstatIOSysSequences
pgstatIOUsrSequences

pgstatActivity
pgstatBgWriter

pgstatDatabaseConflicts
pgstatReplication

pgstatUserFunctions

